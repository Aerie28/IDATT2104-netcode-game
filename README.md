# Netcode Game Implementation

A real-time multiplayer game implementation exploring client-side prediction, server reconciliation, and entity interpolation in Rust.

[CI Status](https://github.com/Aerie28/IDATT2104-netcode-game/actions)

[Github peages](https://aerie28.github.io/IDATT2104-netcode-game/)


## Introduction

This project implements a client-server architecture for real-time multiplayer games, focusing on solving common networking challenges such as latency, packet loss, and state synchronization. The implementation is based on the techniques described in [Gabriel Gambetta's article](https://www.gabrielgambetta.com/client-side-prediction-live-demo.html).

### Contributors
Andr√© Merkesdal, Aerie28

Daniel Kvarsnes, DannX155

## Implemented Features

- Client-side prediction
- Server reconciliation
- Entity interpolation
- Network condition simulation
- Performance analysis tools
- Real-time visualization of prediction errors
- Configurable network parameters (delay, packet loss, timeout/disconnect and reconnect)

## Technical Details

### Architecture
- Client-Server model using UDP
- State synchronization with server authority
- Client-side prediction for smooth gameplay
- Entity interpolation for other players

### Network Protocol
- Custom binary protocol using bincode
- Optimized for real-time updates
- Support for various message types (connect, input, state updates)

## Dependencies

- `tokio`: Async runtime for network operations
- `macroquad`: Game engine and rendering
- `bincode`: Binary serialization
- `uuid`: Player identification
- `serde`: Serialization framework

## How to use/ implement
NB: This project was developed on the OS Windows 11. The developers did not have access to a Linux or MacOS machine during development.
However, based on previous experience and research the core functionality should be compatible across all platforms.

## Installation

1. Install Rust:
   Follow the instructions at [rustup.rs](https://www.rust-lang.org/tools/install) to install Rust.
   Using rustup is the recommended way to install Rust. It manages Rust versions and associated tools, making it easy to keep your Rust installation up to date.
 

2. Clone the repository:
```bash
git clone https://github.com/yourusername/netcode-game.git
cd netcode-game
```
Navigate to the project directory and run the following commands

3. Build the project:
```bash
cargo build --release
```

## Usage

1. Start the server:
```bash
cargo run --bin server
```

2. Start one or more clients:
```bash
cargo run --bin client
```

### Controls
- WASD: Move player
- R: Toggle connection
- T: Start performance testing
- V/B: Adjust delay
- N/M: Adjust packet loss

## Testing

Run the test suite:
```bash
cargo test
```

## Documentation
For API documentation and coverage report, refer to the [docs](https://aerie28.github.io/IDATT2104-netcode-game/) generated by the github workflow.

Run performance tests:
1. Start the server
2. Start a client
3. Press 'T' to begin performance testing
4. View results in the console

## Future Improvements

- Implement a Player Entity for better and easier entity management
- Advanced prediction algorithms
- Network statistics visualization
- Improve disconnection and reconnection handling. Eg. rejoining  with the same player without losing the current state
- More comprehensive error handling
- Player interaction and lag compensation, eg. crash/collision handling



## Acknowledgments

- [Gabriel Gambetta's article on client-side prediction](https://www.gabrielgambetta.com/client-side-prediction-live-demo.html)
- [netcode - Wikipedia](https://en.wikipedia.org/wiki/Netcode) for networking concepts